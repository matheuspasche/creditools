% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/config.R
\name{credit_policy}
\alias{credit_policy}
\alias{stress_aggravation}
\alias{stress_monotonic_increase}
\alias{stress_custom}
\title{Constructor for the credit_policy S3 class}
\usage{
credit_policy(
  applicant_id_col,
  score_cols,
  current_approval_col,
  actual_default_col,
  risk_level_col = NULL,
  simulation_stages = list(),
  stress_scenarios = list()
)

stress_aggravation(factor, by = NULL)

stress_monotonic_increase(
  rate_at_min,
  rate_at_max,
  score_col,
  method = "linear"
)

stress_custom(func)
}
\arguments{
\item{applicant_id_col}{The column with the unique applicant ID.}

\item{score_cols}{A character vector of column names for the credit scores.}

\item{current_approval_col}{The column indicating the historical approval decision.}

\item{actual_default_col}{The column indicating the observed default outcome.}

\item{risk_level_col}{Optional. A column for risk stratification (e.g., risk bands),
used in some stress scenarios.}

\item{simulation_stages}{A list defining the sequence of simulation stages,
created using \code{stage_cutoff()} or \code{stage_rate()}.}

\item{stress_scenarios}{A list defining stress testing scenarios for swap-ins,
created with \code{stress_aggravation()} or \code{stress_monotonic_increase()}.}

\item{factor}{For \code{stress_aggravation}, the multiplicative factor to apply to the baseline default rate.}

\item{by}{For \code{stress_aggravation}, the column name to group by for stratified aggravation. If NULL, aggravation is applied globally.}

\item{rate_at_min}{For \code{stress_monotonic_increase}, the assumed default rate for the minimum score value.}

\item{rate_at_max}{For \code{stress_monotonic_increase}, the assumed default rate for the maximum score value.}

\item{score_col}{For \code{stress_monotonic_increase}, the score column to which the monotonic trend applies.}

\item{method}{For \code{stress_monotonic_increase}, the interpolation method (currently only "linear" is supported).}

\item{func}{For \code{stress_custom}, an arbitrary R function that takes the \code{data} frame of swap-ins and returns a numeric vector with probabilities.}
}
\value{
A \code{credit_policy} object.
}
\description{
Creates a new \code{credit_policy} object, which defines all the parameters
needed to run a credit simulation. This includes column mappings,
score definitions, simulation stages, and stress testing parameters.
}
\examples{
# Define a simple credit policy
my_policy <- credit_policy(
  applicant_id_col = "id",
  score_cols = c("score_v1", "score_v2"),
  current_approval_col = "approved_v1",
  actual_default_col = "defaulted",
  risk_level_col = "risk_band",
  simulation_stages = list(
    # New policy requires passing a score cutoff AND a fraud check
    stage_cutoff(name = "credit_check", cutoffs = list(score_v2 = 700)),
    stage_rate(name = "fraud_check", base_rate = 0.98)
  ),
  stress_scenarios = list(
    # For swap-ins, simulate defaults with a 30\% uplift on the baseline
    stress_aggravation(factor = 1.3, by = "risk_band")
  )
)

# Print the policy to see a summary
print(my_policy)
}
