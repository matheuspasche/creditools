% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sample_data.R
\name{generate_sample_data}
\alias{generate_sample_data}
\title{Generate realistic sample data for credit simulation}
\usage{
generate_sample_data(
  n_applicants = 20000,
  correlation = 0.7,
  churn_rate = 1,
  base_default_rate = 0.1,
  base_approval_rate = 0.5,
  default_rate_dispersion = 0.4,
  min_conversion_rate = 0.4,
  max_conversion_rate = 0.8,
  seed = NULL
)
}
\arguments{
\item{n_applicants}{Number of applicants to generate.}

\item{correlation}{The desired correlation between the old and new scores.
Must be between 0 and 1.}

\item{churn_rate}{A factor controlling the amount of rank migration. Higher
values mean more customers change risk buckets between scores. A value of
0 means the scores have a perfect rank correlation. A value of 1 gives
a moderate amount of churn.}

\item{base_default_rate}{The approximate overall default rate in the population.}

\item{base_approval_rate}{The historical approval rate based on the old score.}

\item{default_rate_dispersion}{Controls the separation between good and bad risk.}

\item{min_conversion_rate}{The minimum conversion rate for the best scores.}

\item{max_conversion_rate}{The maximum conversion rate for the worst scores.}

\item{seed}{A random seed for reproducibility.}
}
\value{
A tibble with the generated sample data, including IDs, scores,
historical policy outcomes, and the true default status.
}
\description{
Creates a large, realistic dataset for simulating credit policy changes.
This function generates two scores (\code{score_antigo} and \code{score_novo}) with a
controllable correlation structure and realistic rank migration (i.e., churn
in risk deciles).

The generation process is based on a latent variable model:
\enumerate{
\item A "true risk" latent variable \code{z} is generated.
\item Each score is a combination of this true risk and an idiosyncratic noise component.
\item The \code{defaulted} outcome is a probabilistic function of the true risk \code{z}.
This ensures that the scores are predictive and the default rates are logical.
}
}
\examples{
# Generate a sample with high correlation and moderate churn
analytical_base <- generate_sample_data(
  n_applicants = 10000,
  correlation = 0.8,
  churn_rate = 1,
  seed = 42
)
\dontrun{
# Check the migration
table(
  dplyr::ntile(analytical_base$old_score, 10),
  dplyr::ntile(analytical_base$new_score, 10)
)
}
}
